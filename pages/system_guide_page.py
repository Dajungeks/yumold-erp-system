import streamlit as st
from datetime import datetime

def show_system_guide(get_text):
    """시스템 가이드 페이지"""
    st.title(f"📖 {get_text('system_guide')}")
    
    # 탭 생성
    tab1, tab2, tab3, tab4 = st.tabs(["🏠 시스템 개요", "📋 주요 기능", "👥 사용자 가이드", "❓ FAQ"])
    
    with tab1:
        show_system_overview()
    
    with tab2:
        show_main_features()
    
    with tab3:
        show_user_guide()
    
    with tab4:
        show_faq()

def show_system_overview():
    """시스템 개요"""
    st.header("🏠 시스템 개요")
    
    st.markdown("""
    ## 금도((金道)) Geumdo [ Golden Way ]
    베트남 기업을 위한 통합 비즈니스 관리 솔루션입니다.
    
    ### ✨ 주요 특징
    - **다국어 지원**: 한국어, 베트남어, 영어
    - **역할 기반 접근**: 마스터와 직원 권한 분리
    - **실시간 협업**: 게시판과 업무 진행 상태 관리
    - **통합 관리**: 고객, 제품, 견적, 주문 통합 관리
    
    ### 🔐 사용자 역할
    """)
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.info("""
        **👑 마스터 권한**
        - 모든 시스템 접근 가능
        - 직원 관리 및 권한 설정
        - 시스템 설정 및 구성
        - 모든 업무 수정/삭제 권한
        - 승인 및 재무 관리
        """)
    
    with col2:
        st.info("""
        **👤 직원 권한**
        - 업무 관련 기능 접근
        - 고객 및 견적 관리
        - 개인 상태 관리
        - 할당된 업무 처리
        - 게시판 참여
        """)

def show_main_features():
    """주요 기능 소개"""
    st.header("📋 주요 기능")
    
    # 핵심 기능들
    features = [
        {
            "title": "📢 게시판 시스템",
            "description": "마스터와 직원 분리형 게시판, 개인 메시지 기능",
            "details": [
                "마스터 전용 게시판과 직원 게시판 분리",
                "개인 메시지 및 공지사항 기능",
                "첨부파일 지원 및 게시글 관리"
            ]
        },
        {
            "title": "📋 업무 진행 상태 관리",
            "description": "견적과 독립적인 업무 지시 및 관리 시스템",
            "details": [
                "업무 생성, 할당, 진행 상태 추적",
                "담당자별 업무 현황 대시보드",
                "댓글 및 진행률 관리",
                "마스터의 모든 업무 수정/삭제 권한"
            ]
        },
        {
            "title": "👥 직원 관리",
            "description": "직원 정보 및 권한 관리",
            "details": [
                "직원 등록, 수정, 삭제",
                "권한 기반 메뉴 접근 제어",
                "개인 상태 및 휴가 관리",
                "비밀번호 관리 시스템"
            ]
        },
        {
            "title": "🏢 고객 관리",
            "description": "고객 정보 및 관계 관리",
            "details": [
                "고객 등록 및 정보 관리",
                "국가별 도시 선택 기능",
                "고객 통계 및 분석",
                "대량 데이터 처리"
            ]
        },
        {
            "title": "📦 제품 관리",
            "description": "통합 제품 정보 관리",
            "details": [
                "마스터 제품 데이터베이스",
                "판매 제품 및 공급가 관리",
                "제품 코드 자동 생성",
                "가격 관리 연동"
            ]
        },
        {
            "title": "💰 견적 및 주문 관리",
            "description": "견적서 생성부터 주문 처리까지",
            "details": [
                "견적서 생성 및 PDF 출력",
                "다중 통화 지원",
                "주문 처리 및 추적",
                "승인 워크플로우"
            ]
        },
        {
            "title": "🔄 비즈니스 프로세스 관리",
            "description": "Sales, Service, Mixed 프로세스 관리",
            "details": [
                "7단계 Sales 프로세스",
                "9단계 Service 프로세스",
                "단계별 상태 추적",
                "워크플로우 시각화"
            ]
        },
        {
            "title": "💱 환율 관리",
            "description": "실시간 환율 정보 및 관리",
            "details": [
                "실시간 환율 업데이트",
                "다중 통화 지원",
                "환율 히스토리 관리",
                "자동 환율 적용"
            ]
        }
    ]
    
    for feature in features:
        with st.expander(f"{feature['title']} - {feature['description']}"):
            for detail in feature['details']:
                st.write(f"• {detail}")

def show_user_guide():
    """사용자 가이드"""
    st.header("👥 사용자 가이드")
    
    # 역할별 가이드
    user_type = st.selectbox("사용자 유형 선택", ["마스터", "직원"])
    
    if user_type == "마스터":
        st.subheader("👑 마스터 사용자 가이드")
        
        st.markdown("""
        ### 🚀 시작하기
        1. **로그인**: 마스터 계정으로 로그인
        2. **대시보드 확인**: 전체 시스템 현황 파악
        3. **직원 등록**: 직원 관리 → 직원 등록
        4. **권한 설정**: 직원별 접근 권한 설정
        
        ### 📊 일상 업무
        - **업무 지시**: 업무 진행 상태 → 새 업무 등록
        - **승인 처리**: 승인 관리 → 대기 중인 승인 처리
        - **데이터 관리**: 각 관리 메뉴에서 데이터 추가/수정
        - **통계 확인**: 대시보드에서 실시간 현황 모니터링
        
        ### 🔧 고급 기능
        - **시스템 설정**: 전체 시스템 구성 관리
        - **PDF 디자인**: 견적서 및 문서 템플릿 편집
        - **데이터 백업**: 정기적인 데이터 백업 수행
        """)
        
    else:
        st.subheader("👤 직원 사용자 가이드")
        
        st.markdown("""
        ### 🚀 시작하기
        1. **로그인**: 개인 계정으로 로그인
        2. **개인 상태 확인**: 개인 상태 관리 메뉴 확인
        3. **할당 업무 확인**: 업무 진행 상태에서 내 업무 확인
        
        ### 📋 일상 업무
        - **업무 처리**: 할당된 업무의 상태 업데이트
        - **고객 관리**: 담당 고객 정보 관리
        - **견적 작성**: 견적서 생성 및 관리
        - **게시판 참여**: 직원 게시판에서 소통
        
        ### 💼 개인 관리
        - **휴가 신청**: 개인 상태 관리에서 휴가 신청
        - **정보 수정**: 개인정보 수정 요청
        - **비밀번호 변경**: 보안을 위한 정기적 변경
        """)

def show_faq():
    """자주 묻는 질문"""
    st.header("❓ 자주 묻는 질문")
    
    faqs = [
        {
            "question": "🔐 비밀번호를 잊어버렸어요",
            "answer": "마스터에게 연락하여 비밀번호 재설정을 요청하세요. 마스터는 직원 관리 메뉴에서 개별 비밀번호를 재설정할 수 있습니다."
        },
        {
            "question": "📋 업무 상태를 변경하려면?",
            "answer": "업무 진행 상태 메뉴에서 해당 업무를 선택하고 '상태변경' 버튼을 클릭하세요. 담당자나 마스터만 상태를 변경할 수 있습니다."
        },
        {
            "question": "🌍 언어를 변경하려면?",
            "answer": "상단의 언어 선택 드롭다운에서 원하는 언어(한국어, 베트남어, 영어)를 선택하세요."
        },
        {
            "question": "📊 통계가 업데이트되지 않아요",
            "answer": "대시보드는 실시간으로 업데이트됩니다. 페이지를 새로고침하거나 다른 메뉴를 방문 후 다시 돌아와 보세요."
        },
        {
            "question": "💰 견적서 PDF가 생성되지 않아요",
            "answer": "견적 정보가 완전히 입력되었는지 확인하세요. 특히 고객 정보와 제품 정보가 모두 입력되어야 PDF 생성이 가능합니다."
        },
        {
            "question": "👥 새 직원을 추가하려면?",
            "answer": "마스터 권한으로 로그인 후 직원 관리 → 직원 등록 메뉴에서 새 직원 정보를 입력하여 등록할 수 있습니다."
        },
        {
            "question": "🔄 비즈니스 프로세스 단계를 건너뛸 수 있나요?",
            "answer": "각 프로세스는 순차적으로 진행되도록 설계되었습니다. 특별한 경우 마스터 권한으로 단계를 조정할 수 있습니다."
        },
        {
            "question": "📱 모바일에서도 사용할 수 있나요?",
            "answer": "네, 반응형 웹 디자인으로 제작되어 모바일 기기에서도 이용 가능합니다. 다만 일부 복잡한 기능은 데스크톱 환경을 권장합니다."
        }
    ]
    
    for faq in faqs:
        with st.expander(faq["question"]):
            st.write(faq["answer"])
    
    st.divider()
    
    st.markdown("""
    ### 📞 추가 지원이 필요하신가요?
    
    위의 FAQ에서 답을 찾지 못하셨다면:
    
    1. **마스터에게 문의**: 시스템 관련 문제는 마스터에게 연락
    2. **게시판 활용**: 직원 게시판에 질문 게시
    3. **시스템 로그 확인**: 오류 발생 시 정확한 시간과 상황 기록
    
    ---
    *마지막 업데이트: {datetime.now().strftime('%Y년 %m월 %d일')}*
    """)